import { gql } from 'graphql-request';
import { DailyTotalActiveStakersParams } from '../../src/types';
import { createGQLWhereString, createGQLBlockNumberString } from '../../src/utils';

export const createDailyTotalActiveStakersQuery = (
	params?: DailyTotalActiveStakersParams
): string => {
	const whereString = createGQLWhereString(Object.entries({}));

	return gql`
		query totalDailyActiveStakers($autoGeneratedPaginationField: Int, $max: Int) {
			totalDailyActiveStakers(
				first: $max${createGQLBlockNumberString(params?.blockNumber ?? null)}
				where: ${whereString}
				orderBy: id
				orderDirection: desc
			) {
				id
				count
			}
		}
	`;
};
