import { SynthExchange } from '../../generated/graphql';
import { SynthExchangeExpanded } from '../../src/types';
import { formatTimestamp, getHashFromId, hexToAscii, formatEther } from '../../src/utils';

export const parseSynthExchangesL1 = ({
	account,
	block,
	feesInUSD,
	from,
	fromAmount,
	fromAmountInUSD,
	fromCurrencyKey,
	fromSynth,
	gasPrice,
	id,
	timestamp,
	toAddress,
	toAmount,
	toAmountInUSD,
	toCurrencyKey,
	toSynth,
}: SynthExchange): SynthExchangeExpanded => ({
	account,
	block: Number(block),
	feesInUSD: formatEther(feesInUSD),
	from,
	fromAmount: formatEther(fromAmount),
	fromAmountInUSD: formatEther(fromAmountInUSD),
	fromCurrencyKey: hexToAscii(fromCurrencyKey),
	fromSynth,
	gasPrice,
	id,
	timestamp: formatTimestamp(timestamp),
	toAddress,
	toAmount: formatEther(toAmount),
	toAmountInUSD: formatEther(toAmountInUSD),
	toCurrencyKey: hexToAscii(toCurrencyKey),
	toSynth,
	hash: getHashFromId(id),
});

export const parseSynthExchangesL1Kovan = ({
	account,
	block,
	feesInUSD,
	from,
	fromAmount,
	fromAmountInUSD,
	fromCurrencyKey,
	fromSynth,
	gasPrice,
	id,
	timestamp,
	toAddress,
	toAmount,
	toAmountInUSD,
	toCurrencyKey,
	toSynth,
}: SynthExchange): SynthExchangeExpanded => ({
	account,
	block: Number(block),
	feesInUSD,
	from,
	fromAmount,
	fromAmountInUSD,
	fromCurrencyKey: hexToAscii(fromCurrencyKey),
	fromSynth,
	gasPrice,
	id,
	timestamp: formatTimestamp(timestamp),
	toAddress,
	toAmount,
	toAmountInUSD,
	toCurrencyKey: hexToAscii(toCurrencyKey),
	toSynth,
	hash: getHashFromId(id),
});

export const parseSynthExchangesL2 = ({
	account,
	block,
	feesInUSD,
	from,
	fromAmount,
	fromAmountInUSD,
	fromCurrencyKey,
	fromSynth,
	gasPrice,
	id,
	timestamp,
	toAddress,
	toAmount,
	toAmountInUSD,
	toCurrencyKey,
	toSynth,
}: SynthExchange): SynthExchangeExpanded => ({
	account,
	block: Number(block),
	feesInUSD: parseFloat(feesInUSD).toFixed(2),
	from,
	fromAmount: fromAmount,
	fromAmountInUSD: parseFloat(fromAmountInUSD).toFixed(2),
	fromCurrencyKey: hexToAscii(fromCurrencyKey),
	fromSynth,
	gasPrice,
	id,
	timestamp: formatTimestamp(timestamp),
	toAddress,
	toAmount: toAmount,
	toAmountInUSD: parseFloat(toAmountInUSD).toFixed(2),
	toCurrencyKey: hexToAscii(toCurrencyKey),
	toSynth,
	hash: getHashFromId(id),
});
