{"version":3,"file":"use-animation-state-5054a9f7.esm.js","sources":["../../../../../../node_modules/@chakra-ui/hooks/dist/use-animation-state-5054a9f7.esm.js"],"sourcesContent":["import { isBrowser, runIfFn, getOwnerWindow } from '@chakra-ui/utils';\nimport * as React from 'react';\nimport { useState, useEffect } from 'react';\n\n/**\n * useSafeLayoutEffect enables us to safely call `useLayoutEffect` on the browser\n * (for SSR reasons)\n *\n * React currently throws a warning when using useLayoutEffect on the server.\n * To get around it, we can conditionally useEffect on the server (no-op) and\n * useLayoutEffect in the browser.\n *\n * @see https://gist.github.com/gaearon/e7d97cdf38a2907924ea12e4ebdf3c85\n */\n\nvar useSafeLayoutEffect = isBrowser ? React.useLayoutEffect : React.useEffect;\n\n/**\n * React hook to persist any value between renders,\n * but keeps it up-to-date if it changes.\n *\n * @param fn the function to persist\n * @param deps the function dependency list\n */\n\nfunction useCallbackRef(fn, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  var ref = React.useRef(fn);\n  useSafeLayoutEffect(function () {\n    ref.current = fn;\n  }); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  return React.useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return ref.current == null ? void 0 : ref.current.apply(ref, args);\n  }, deps);\n}\n\n/**\n * React hook to manage browser event listeners\n *\n * @param event the event name\n * @param handler the event handler function to execute\n * @param env the dom environment to execute against (defaults to `document`)\n * @param options the event listener options\n *\n * @internal\n */\nfunction useEventListener(event, handler, env, options) {\n  var listener = useCallbackRef(handler);\n  React.useEffect(function () {\n    var _runIfFn;\n\n    var node = (_runIfFn = runIfFn(env)) != null ? _runIfFn : document;\n\n    if (!handler) {\n      return;\n    }\n\n    node.addEventListener(event, listener, options);\n    return function () {\n      node.removeEventListener(event, listener, options);\n    };\n  }, [event, env, options, listener, handler]);\n  return function () {\n    var _runIfFn2;\n\n    var node = (_runIfFn2 = runIfFn(env)) != null ? _runIfFn2 : document;\n    node.removeEventListener(event, listener, options);\n  };\n}\n\nfunction useAnimationState(props) {\n  var isOpen = props.isOpen,\n      ref = props.ref;\n\n  var _useState = useState(isOpen),\n      mounted = _useState[0],\n      setMounted = _useState[1];\n\n  var _useState2 = useState(false),\n      once = _useState2[0],\n      setOnce = _useState2[1];\n\n  useEffect(function () {\n    if (!once) {\n      setMounted(isOpen);\n      setOnce(true);\n    }\n  }, [isOpen, once, mounted]);\n  useEventListener(\"animationend\", function () {\n    setMounted(isOpen);\n  }, function () {\n    return ref.current;\n  });\n  var hidden = isOpen ? false : !mounted;\n  return {\n    present: !hidden,\n    onComplete: function onComplete() {\n      var _ref$current;\n\n      var win = getOwnerWindow(ref.current);\n      var evt = new win.CustomEvent(\"animationend\", {\n        bubbles: true\n      });\n      (_ref$current = ref.current) == null ? void 0 : _ref$current.dispatchEvent(evt);\n    }\n  };\n}\n\nexport { useSafeLayoutEffect as a, useEventListener as b, useAnimationState as c, useCallbackRef as u };\n"],"names":["useSafeLayoutEffect","isBrowser","React.useLayoutEffect","React.useEffect","exports","useEffect","useCallbackRef","fn","deps","ref","React.useRef","current","React.useCallback","useCallback","_len","arguments","length","args","Array","_key","apply","useEventListener","event","handler","env","options","listener","_runIfFn","node","runIfFn","document","addEventListener","removeEventListener","_runIfFn2"],"mappings":"mKAeG,IAACA,EAAsBC,EAAYC,EAAAA,QAAAA,gBAAwBC,EAAgBC,QAAAC,UAU9E,SAASC,EAAeC,EAAIC,QACb,IAATA,IACFA,EAAO,IAGT,IAAIC,EAAMC,iBAAaH,GAKvB,OAJAP,GAAoB,WAClBS,EAAIE,QAAUJ,CAClB,IAESK,EAAiBR,QAAAS,aAAC,WACvB,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAC/EF,EAAKE,GAAQJ,UAAUI,GAGzB,OAAsB,MAAfV,EAAIE,aAAkB,EAASF,EAAIE,QAAQS,MAAMX,EAAKQ,EAC9D,GAAET,EACL,CAYA,SAASa,EAAiBC,EAAOC,EAASC,EAAKC,GAC7C,IAAIC,EAAWpB,EAAeiB,GAe9B,OAdApB,EAAAA,QAAAA,WAAgB,WACd,IAAIwB,EAEAC,EAAoC,OAA5BD,EAAWE,EAAQL,IAAgBG,EAAWG,SAE1D,GAAKP,EAKL,OADAK,EAAKG,iBAAiBT,EAAOI,EAAUD,GAChC,WACLG,EAAKI,oBAAoBV,EAAOI,EAAUD,EAChD,CACA,GAAK,CAACH,EAAOE,EAAKC,EAASC,EAAUH,IAC5B,WACL,IAAIU,GAEqC,OAA7BA,EAAYJ,EAAQL,IAAgBS,EAAYH,UACvDE,oBAAoBV,EAAOI,EAAUD,EAC9C,CACA"}